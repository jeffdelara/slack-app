(this["webpackJsonpslack-app"]=this["webpackJsonpslack-app"]||[]).push([[0],{211:function(e,t,a){},212:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(31),s=a.n(r),l=(a(38),a(1)),i=function(e){var t=e.messageType,a=e.message;return c.a.createElement("div",{className:t},a)},o=function(e){var t=e.setPage,a=Object(n.useState)(!1),r=Object(l.a)(a,2),s=r[0],o=r[1],m=Object(n.useState)("danger"),u=Object(l.a)(m,2);u[0],u[1];return c.a.createElement("main",null,c.a.createElement("div",{id:"login"},c.a.createElement("div",{className:"form"},c.a.createElement("div",{className:"logo"},c.a.createElement("img",{src:"logo.png",alt:""})," slackvion"),c.a.createElement("h1",null,"Login to your account"),s&&c.a.createElement(i,{messageType:"danger",message:s}),c.a.createElement("div",{className:"second"},"Please enter your work email and password."),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(e,a){var n={email:e,password:a},c={method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};fetch("".concat("http://206.189.91.54/api/v1","/auth/sign_in"),c).then((function(e){return console.log(e),200==e.status&&(localStorage.clear(),localStorage.setItem("uid",e.headers.get("uid")),localStorage.setItem("expiry",e.headers.get("expiry")),localStorage.setItem("access-token",e.headers.get("access-token")),localStorage.setItem("client",e.headers.get("client"))),e.json()})).then((function(e){console.log(e),e.errors?o(e.errors[0]):(o(!1),localStorage.setItem("user",JSON.stringify(e.data)),t("slack"))}))}(e.target.elements.email.value,e.target.elements.password.value)}},c.a.createElement("input",{type:"email",name:"email",placeholder:"Email"}),c.a.createElement("input",{type:"password",name:"password",placeholder:"Password"}),c.a.createElement("button",{type:"submit"},"Login")),c.a.createElement("div",{className:"second"},"No account yet?",c.a.createElement("br",null),c.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),t("signup")}},"Click here to create one")))))},m=function(e){var t=e.setPage,a=Object(n.useState)(""),r=Object(l.a)(a,2),s=r[0],o=r[1],m=Object(n.useState)(!1),u=Object(l.a)(m,2),d=u[0],h=u[1],f=function(e,t,a){var n={email:e,password:t,password_confirmation:a},r={method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};fetch("".concat("http://206.189.91.54/api/v1","/auth"),r).then((function(e){return e.json()})).then((function(e){if("error"===e.status){var t=e.errors.full_messages.map((function(e){return c.a.createElement("li",null,e)}));h("danger"),o(t)}"success"===e.status&&(h("success"),o("Success! You may now login."))}))};return c.a.createElement("main",null,c.a.createElement("div",{id:"login"},c.a.createElement("div",{className:"form"},c.a.createElement("div",{className:"logo"},c.a.createElement("img",{src:"logo.png",alt:""})," slackvion"),c.a.createElement("h1",null,"Create your account"),d&&c.a.createElement(i,{messageType:d,message:s}),c.a.createElement("div",{className:"second"},"We suggest using the email address you use at work."),c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.elements.email.value,a=e.target.elements.password.value,n=e.target.elements.confirm_password.value;f(t,a,n)}},c.a.createElement("input",{type:"email",name:"email",placeholder:"Email"}),c.a.createElement("input",{type:"password",name:"password",placeholder:"Password"}),c.a.createElement("input",{type:"password",name:"confirm_password",placeholder:"Confirm Password"}),c.a.createElement("button",{type:"submit"},"Create account")),c.a.createElement("div",{className:"second"},"Already using slackvion? ",c.a.createElement("br",null),c.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),t("login")}},"Click here to login")))))},u=a(11),d=a(2),h=a.n(d),f=a(5),p=a(9),v=function(e){var t=e.chanList,a=e.setChatWindow,n=e.setChannelId,r=e.setChannelName,s=function(e){e.preventDefault();var t=+e.target.getAttribute("data-id"),c=e.target.getAttribute("data-channel-name");a("chat"),n(t),r(c)},l=t.map((function(e){return c.a.createElement("li",null,c.a.createElement("a",{href:"#",onClick:s,"data-channel-name":e.name,"data-id":e.id},c.a.createElement("i",{className:"bx bx-hash"})," ",e.name))}));return c.a.createElement(c.a.Fragment,null,l)},E=function(e){var t=e.pic,a=e.name,n=e.receiverId,r=e.setChatWindow,s=e.setChannelId,l=e.setChannelName;return c.a.createElement("li",{className:"dm-item"},c.a.createElement("a",{href:"#","data-receiver-id":n,onClick:function(e){e.preventDefault(),s(n),l(a),r("dm")}},c.a.createElement("img",{src:t,alt:""})," ",a))},g=function(e){var t=e.dmList,a=(e.setdmList,e.setChatWindow),n=e.setChannelId,r=e.setChannelName,s=t.map((function(e){return c.a.createElement(E,{receiverId:e.id,pic:"https://a.slack-edge.com/d4111/img/apps/workflows_192.png",name:e.name,setChatWindow:a,setChannelId:n,setChannelName:r})}));return c.a.createElement("ul",null,s)},b=function(){return{accessToken:localStorage.getItem("access-token"),client:localStorage.getItem("client"),expiry:localStorage.getItem("expiry"),uid:localStorage.getItem("uid"),user:JSON.parse(localStorage.getItem("user"))}},N=function(e){var t=e.setChatWindow,a=e.setPage,r=e.chanList,s=e.setChanList,i=e.dmList,o=e.setdmList,m=e.setChannelId,d=e.setChannelName,E=Object(n.useState)(!1),N=Object(l.a)(E,2),j=N[0],O=N[1],y=Object(n.useState)([]),C=Object(l.a)(y,2),S=C[0],k=C[1],x=Object(n.useState)([]),w=Object(l.a)(x,2),T=w[0],I=w[1],_=b();Object(n.useEffect)((function(){var e=b(),t=e.accessToken,n=e.client,c=e.expiry,r=e.uid;e.user;t&&n&&c&&r?function(e){var t={method:"GET",mode:"cors",headers:{"access-token":e.accessToken,client:e.client,expiry:e.expiry,uid:e.uid}};fetch("".concat("http://206.189.91.54/api/v1","/channels"),t).then((function(e){return e.json()})).then((function(e){if(e.errors);else{var t=e.data;s(Object(p.a)(t)),m(t[0].id),d(t[0].name)}}))}({accessToken:t,client:n,expiry:c,uid:r}):a("login")}),[]),Object(n.useEffect)((function(){j&&(localStorage.clear(),a("login"))}),[j]),Object(n.useEffect)((function(){P(r)}),[r]),Object(n.useEffect)((function(){var e=Object(p.a)(new Set(S));D(e)}),[S]);var D=function(){var e=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],t.forEach(function(){var e=Object(f.a)(h.a.mark((function e(t){var n,c,r,s,l,i,o,m,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",mode:"cors",headers:{"access-token":_.accessToken,client:_.client,expiry:_.expiry,uid:_.uid}},c="".concat("http://206.189.91.54/api/v1","/messages?receiver_id=").concat(t,"&receiver_class=User"),e.next=4,fetch(c,n);case 4:return r=e.sent,e.next=7,r.json();case 7:s=e.sent,l=s.data,console.log(l),l.length>0&&(i=l[0].sender.uid,o=l[0].receiver.uid,m="",m=i===o?_.user.uid:i===_.user.uid?o:i,u={id:t,name:m,messages:l},a.push(u),I([].concat(a,[u])));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=[];T.forEach((function(t){(function(t){var a,n=Object(u.a)(e);try{for(n.s();!(a=n.n()).done;){if(a.value.id===t.id)return!0}}catch(c){n.e(c)}finally{n.f()}return!1})(t)||e.push(t)})),o(e)}),[T]);var P=function(){var e=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],t.forEach(function(){var e=Object(f.a)(h.a.mark((function e(t){var n,c,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",mode:"cors",headers:{"access-token":_.accessToken,client:_.client,expiry:_.expiry,uid:_.uid}},c="".concat("http://206.189.91.54/api/v1","/channels/").concat(t.id),e.next=4,fetch(c,n);case 4:return r=e.sent,e.next=7,r.json();case 7:s=e.sent,s.data.channel_members.forEach((function(e){if(!a.includes(e.user_id)){var t=e.user_id;a.push(t),k([].concat(a,[t]))}}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("section",{id:"sidebar"},c.a.createElement("div",{id:"side-header"},c.a.createElement("div",{className:"container header"},c.a.createElement("h1",null,"Avion School"),c.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),console.log("CREATE MESSAGE",e.target),t("compose-message")}},c.a.createElement("i",{className:"bx bx-message-square-edit",id:"side-create-message"})))),c.a.createElement("div",{className:"container"},c.a.createElement("div",{id:"side-channel-list"},c.a.createElement("a",{href:"#"},"Channels"),c.a.createElement("ul",null,c.a.createElement(v,{chanList:r,setChatWindow:t,setChannelId:m,setChannelName:d}),c.a.createElement("li",null,c.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),t("create-chat")}},c.a.createElement("i",{className:"bx bxs-plus-square"})," Create channels")))),c.a.createElement("div",{id:"side-direct-messages",className:"mt-2"},c.a.createElement("a",{href:"#"},"Direct messages"),c.a.createElement(g,{dmList:i,setdmList:o,setChatWindow:t,setChannelId:m,setChannelName:d})),c.a.createElement("div",{className:"mt-2"},c.a.createElement("a",{href:"#",onClick:function(){return O(!0)}},c.a.createElement("i",{class:"bx bx-log-out"})," Logout"))))},j=(a(39),function(e){return e.show?c.a.createElement("div",{className:"modal"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{class:"modal-header"},c.a.createElement("h4",{className:"modal-title"},"USERS")),c.a.createElement("div",{className:"modal-body"},c.a.createElement("li",null,"SEAN DELA CRUZ"),c.a.createElement("li",null,"JEFF DE LARA"),c.a.createElement("li",null,"MAURUS VITOR")),c.a.createElement("div",{className:"modal-footer"},c.a.createElement("button",{onClick:e.onClose,className:"button"},"Close")))):null}),O=function(e){var t=e.userName,a=e.userMessage,n=e.userPicture,r=e.chatDate;return c.a.createElement("div",{className:"channel-message"},c.a.createElement("div",{className:"sender-pic"},c.a.createElement("img",{src:n,alt:""})),c.a.createElement("div",{className:"sender"},c.a.createElement("div",{className:"sender-name"},t," ",c.a.createElement("span",{className:"created"},r)),c.a.createElement("div",{className:"sender-message"},a)))},y=function(e){var t=e.channelMessages,a=!1;return t&&(a=t.map((function(e){return c.a.createElement(O,{userName:e.sender.uid,userMessage:e.body,chatDate:e.created_at,userPicture:"https://a.slack-edge.com/d4111/img/apps/workflows_192.png"})}))),c.a.createElement(c.a.Fragment,null,t&&a)},C=(a(40),function(e){var t=e.channelId,a=e.channelName,r=e.setChatWindow,s=e.counter,i=e.setCounter,o=Object(n.useState)({}),m=Object(l.a)(o,2),u=(m[0],m[1],Object(n.useState)("")),d=Object(l.a)(u,2),h=d[0],f=d[1],p=Object(n.useState)([]),v=Object(l.a)(p,2),E=v[0],g=v[1],N=Object(n.useRef)(),O=b();Object(n.useEffect)((function(){C(t,O),console.log(s);var e=setTimeout((function(){i(s+1),C(t,O)}),2e3);return function(){clearTimeout(e)}}),[t,s]);var C=function(e,t){var a={method:"GET",mode:"cors",headers:{"access-token":t.accessToken,client:t.client,expiry:t.expiry,uid:t.uid}},n="".concat("http://206.189.91.54/api/v1","/messages?receiver_id=").concat(e,"&receiver_class=Channel");fetch(n,a).then((function(e){return e.json()})).then((function(e){var t=e.data;g((function(){return t})),N.current.scrollIntoView({behavior:"smooth"})}))},S=Object(n.useState)(!1),k=Object(l.a)(S,2),x=k[0],w=k[1];return c.a.createElement("section",{id:"channel-chat"},c.a.createElement("div",{id:"channel-header"},c.a.createElement("div",{className:"container header"},c.a.createElement("h1",null,c.a.createElement("i",{className:"bx bx-hash"}),a),c.a.createElement("div",{className:"channel-options"},c.a.createElement("a",{href:"#",className:"channel-btn",onClick:function(e){console.log("Add member"),e.preventDefault(),r("add-member")}},"+ Add member"),c.a.createElement("div",{id:"channel-members"},c.a.createElement("button",{onClick:function(){return w(!0)}},c.a.createElement("img",{src:"https://a.slack-edge.com/d4111/img/apps/workflows_192.png",alt:""}),c.a.createElement("img",{src:"https://ca.slack-edge.com/T010DU0GZE0-U02C42FABUK-8daed97695af-512",alt:""}),c.a.createElement("img",{src:"https://ca.slack-edge.com/T010DU0GZE0-U01CNLJ3J0P-46af7649e68b-512",alt:""})),c.a.createElement("span",{className:"muted"},c.a.createElement(j,{onClose:function(){return w(!1)},show:x})))))),c.a.createElement("div",{id:"channel-chat-content"},c.a.createElement(y,{channelMessages:E}),c.a.createElement("div",{ref:N})),c.a.createElement("div",{id:"channel-chat-input"},c.a.createElement("div",{className:"container"},c.a.createElement("textarea",{name:"",id:"",onChange:function(e){e.preventDefault(),f(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),console.log(h),function(e){var t=e.message,a=e.channelId,n=e.headers,c={method:"POST",mode:"cors",headers:{"Content-Type":"application/json","access-token":n.accessToken,client:n.client,expiry:n.expiry,uid:n.uid},body:JSON.stringify({receiver_id:a,receiver_class:"Channel",body:t})},r="".concat("http://206.189.91.54/api/v1","/messages");fetch(r,c).then((function(e){return e.json()})).then((function(e){console.log(e),e.errors||C(a,n)}))}({message:e.target.value,channelId:t,headers:O}),e.target.value="",f(""))},placeholder:"Message #announcement"},h))))}),S=function(e){e.setIsThreadOpen;return c.a.createElement("section",{id:"thread"},c.a.createElement("div",{id:"thread-header"},c.a.createElement("div",{className:"container header"},c.a.createElement("h1",null,"Thread"),c.a.createElement("i",{className:"bx bx-x"}))),c.a.createElement("div",{className:"channel-message"},c.a.createElement("div",{className:"sender-pic"},c.a.createElement("img",{src:"https://ca.slack-edge.com/T010DU0GZE0-U01CNLJ3J0P-46af7649e68b-512",alt:""})),c.a.createElement("div",{className:"sender"},c.a.createElement("div",{className:"sender-name"},"Maurus Vitor ",c.a.createElement("span",{className:"created"},"8:01 PM")),c.a.createElement("div",{className:"sender-message"},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Placeat, enim quis! Dolorum ut neque aliquam atque. Dolores dolorem, similique consectetur necessitatibus ut libero quis ipsam alias. Voluptate error ipsam perferendis."))),c.a.createElement("div",{className:"thread-divider"},c.a.createElement("span",{className:"thread-content"},"Tuesday, November 9th")),c.a.createElement("div",{className:"channel-message"},c.a.createElement("div",{className:"sender-pic"},c.a.createElement("img",{src:"https://ca.slack-edge.com/T010DU0GZE0-U02C42FABUK-8daed97695af-512",alt:""})),c.a.createElement("div",{className:"sender"},c.a.createElement("div",{className:"sender-name"},"Jeff de Lara ",c.a.createElement("span",{className:"created"},"8:01 PM")),c.a.createElement("div",{className:"sender-message"},"Good evening! Don't forget to post your standup."))),c.a.createElement("div",{id:"thread-chat-input"},c.a.createElement("div",{className:"container"},c.a.createElement("textarea",{name:"",id:"",placeholder:"Reply"}))))},k=function(e){var t=e.chanList,a=e.setChanList,r=Object(n.useState)(null),s=Object(l.a)(r,2),i=s[0],o=s[1],m=Object(n.useState)({}),u=Object(l.a)(m,2),d=u[0],h=u[1];Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));o(e.id),h({"Content-Type":"application/json","access-token":localStorage.getItem("access-token"),client:localStorage.getItem("client"),expiry:localStorage.getItem("expiry"),uid:localStorage.getItem("uid")})}),[i]);var f=function(e,n){console.log(e,n);var c={name:e,user_ids:[+n]},r={method:"POST",mode:"cors",headers:d,body:JSON.stringify(c)},s="".concat("http://206.189.91.54/api/v1","/channels");fetch(s,r).then((function(e){return e.json()})).then((function(e){console.log(e),e.errors?console.log(e):a([].concat(Object(p.a)(t),[e.data]))}))};return c.a.createElement("section",{id:"channel-chat"},c.a.createElement("div",{id:"channel-header"},c.a.createElement("div",{className:"container header"},c.a.createElement("h1",null,c.a.createElement("i",{className:"bx bx-hash"})," Create channel"))),c.a.createElement("div",{id:"channel-chat-content"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"muted"},"Type the name of new channel"),c.a.createElement("form",{className:"form form-full",onSubmit:function(e){e.preventDefault();var t=e.target.elements.channelName.value;t.trim()&&(console.log(t),f(t,i))}},c.a.createElement("input",{type:"text",name:"channelName",className:"textbox",placeholder:"Channel name"})))))},x=a(16),w=function(e){var t=e.title,a=e.message,n=e.created_at;return c.a.createElement("div",{className:"channel-message"},c.a.createElement("div",{className:"sender-pic"},c.a.createElement("img",{src:"https://a.slack-edge.com/d4111/img/apps/workflows_192.png",alt:""})),c.a.createElement("div",{className:"sender"},c.a.createElement("div",{className:"sender-name"},t," ",c.a.createElement("span",{className:"created"},n)),c.a.createElement("div",{className:"sender-message"},a)))},T=function(e){var t=e.channelId,a=e.channelName,r=e.counter,s=e.setCounter,i=t,o=a,m=Object(n.useState)({}),d=Object(l.a)(m,2),h=d[0],f=d[1],p=Object(n.useState)(""),v=Object(l.a)(p,2),E=v[0],g=v[1],N=b(),j=Object(n.useRef)();Object(n.useEffect)((function(){O(i,N),console.log(r);var e=setTimeout((function(){s(r+1),O(i,N)}),3e3);return function(){clearTimeout(e)}}),[i,r]);var O=function(e,t){var a={method:"GET",mode:"cors",headers:{"access-token":t.accessToken,client:t.client,expiry:t.expiry,uid:t.uid}},n="".concat("http://206.189.91.54/api/v1","/messages?receiver_id=").concat(e,"&receiver_class=User");fetch(n,a).then((function(e){return e.json()})).then((function(e){var t,a=e.data,n={},c=Object(u.a)(a);try{for(c.s();!(t=c.n()).done;){var r=t.value;n[r.id]={sender:r.sender.email,receiver:r.receiver.email,body:r.body,created_at:r.receiver.created_at}}}catch(s){c.e(s)}finally{c.f()}f(Object(x.a)({},n)),j.current.scrollIntoView({behavior:"smooth"})}))},y=Object.keys(h).map((function(e){return c.a.createElement(w,{title:h[e].sender,message:h[e].body,created_at:h[e].created_at})}));return c.a.createElement("section",{id:"channel-chat"},c.a.createElement("div",{id:"channel-header"},c.a.createElement("div",{className:"container header"},c.a.createElement("h1",null,c.a.createElement("img",{src:"https://a.slack-edge.com/d4111/img/apps/workflows_192.png",alt:""})," ",o))),c.a.createElement("div",{id:"channel-chat-content"},y,c.a.createElement("div",{ref:j})),c.a.createElement("div",{id:"channel-chat-input"},c.a.createElement("div",{className:"container"},c.a.createElement("textarea",{name:"",id:"",onChange:function(e){e.preventDefault(),g(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),console.log(E),function(e){var t=e.message,a=e.receiverId,n=e.headers,c={method:"POST",mode:"cors",headers:{"Content-Type":"application/json","access-token":n.accessToken,client:n.client,expiry:n.expiry,uid:n.uid},body:JSON.stringify({receiver_id:a,receiver_class:"User",body:t})},r="".concat("http://206.189.91.54/api/v1","/messages");fetch(r,c).then((function(e){return e.json()})).then((function(e){if(e.errors)console.log("There is an error sending message.");else{var t=e.data,a={};a[t.id]={sender:n.user.uid,receiver:"",body:t.body,created_at:t.created_at},f(Object(x.a)(Object(x.a)({},h),a)),j.current.scrollIntoView({behavior:"smooth"})}}))}({message:e.target.value,receiverId:i,headers:N}),e.target.value="",g(""))},placeholder:"Message #announcement"},E))))},I=function(e){var t=e.receiverId,a=e.setChatWindow,r=e.setChannelId,s=e.setChannelName,i=Object(n.useState)(""),o=Object(l.a)(i,2),m=o[0],u=o[1],d=Object(n.useState)({}),h=Object(l.a)(d,2),f=(h[0],h[1],b()),p=function(e){var t=e.message,n=e.receiverId,c=e.headers,l={method:"POST",mode:"cors",headers:{"Content-Type":"application/json","access-token":c.accessToken,client:c.client,expiry:c.expiry,uid:c.uid},body:JSON.stringify({receiver_id:n,receiver_class:"User",body:t})},i="".concat("http://206.189.91.54/api/v1","/messages");fetch(i,l).then((function(e){return e.json()})).then((function(e){if(e.errors)console.log("There is an error sending message.");else{var t=e.data;console.log("CHAN CHAT INPUT: ",t),r(n),s(c.user.uid),a("dm")}}))};return c.a.createElement("div",{id:"channel-chat-input"},c.a.createElement("div",{className:"container"},c.a.createElement("textarea",{name:"",id:"",onChange:function(e){e.preventDefault(),u(e.target.value)},onKeyPress:function(e){if("Enter"===e.key){e.preventDefault(),console.log(m);var a=e.target.value;p({message:a,receiverId:t,headers:f}),e.target.value="",u("")}},placeholder:"Message #announcement"},m)))},_=function(e){var t=e.id,a=e.name,n=e.setUser;return c.a.createElement("div",{className:"channel-message",key:t},c.a.createElement("div",{className:"sender-pic"},c.a.createElement("img",{src:"https://a.slack-edge.com/d4111/img/apps/workflows_192.png",alt:""})),c.a.createElement("div",{className:"sender"},c.a.createElement("div",{className:"sender-name"},c.a.createElement("a",{href:"#",onClick:function(e){return function(e,t){e.preventDefault(),console.log(t),n({id:t,name:a})}(e,t)}},a)),c.a.createElement("div",{className:"muted"},"ID: ",a)))},D=function(e){var t=e.matchedTerms,a=e.setUser,n=t.map((function(e){return c.a.createElement(_,{name:e.email,setUser:a,id:e.id})}));return c.a.createElement(c.a.Fragment,null,n)},P=function(e){var t=e.setChannelId,a=e.setChannelName,r=e.setChatWindow,s=Object(n.useState)([]),i=Object(l.a)(s,2),o=i[0],m=i[1],u=Object(n.useState)(!1),d=Object(l.a)(u,2),h=d[0],f=d[1],p=Object(n.useState)(""),v=Object(l.a)(p,2),E=v[0],g=v[1],N=Object(n.useState)([]),j=Object(l.a)(N,2),O=j[0],y=j[1],C=b();Object(n.useEffect)((function(){k()}),[]);var S,k=function(){var e={headers:{"access-token":C.accessToken,client:C.client,expiry:C.expiry,uid:C.uid}},t="".concat("http://206.189.91.54/api/v1","/users");fetch(t,e).then((function(e){return e.json()})).then((function(e){var t=e.data.map((function(e){return{id:e.id,uid:e.uid,email:e.email}}));m(t)}))};Object(n.useEffect)((function(){""!==E?S=setTimeout((function(){var e=o.filter((function(e){var t=new RegExp(E+"[a-zA-Z0-9]*");return e.email.match(t)}));y(e)}),500):y([])}),[E]);return c.a.createElement("section",{id:"channel-chat"},c.a.createElement("div",{id:"channel-header"},c.a.createElement("div",{className:"container header"},c.a.createElement("h1",null,c.a.createElement("i",{className:"bx bx-message-square-edit"})," Compose message"))),c.a.createElement("div",{id:"channel-chat-content"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"muted"},"Send message to:"),h&&c.a.createElement("div",{className:"user-to"},h.name," ",c.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),f(!1)}},"x")),!h&&c.a.createElement("input",{type:"text",onChange:function(e){clearTimeout(S);var t=e.target.value;g(t)},value:E,name:"channelName",className:"textbox",placeholder:"Search user...",autoComplete:"off"}),!h&&c.a.createElement("div",{className:"mt"},c.a.createElement(D,{matchedTerms:O,setUser:f})))),h&&c.a.createElement(I,{receiverId:h.id,receiverName:h.name,setChatWindow:r,setChannelId:t,setChannelName:a}))},L=function(e){var t=e.channelId,a=(e.setChatWindow,e.channelName),r=Object(n.useState)([]),s=Object(l.a)(r,2),o=s[0],m=s[1],u=Object(n.useState)(!1),d=Object(l.a)(u,2),p=d[0],v=d[1],E=Object(n.useState)(""),g=Object(l.a)(E,2),N=g[0],j=g[1],O=Object(n.useState)([]),y=Object(l.a)(O,2),C=y[0],S=y[1],k=Object(n.useState)(!1),x=Object(l.a)(k,2),w=x[0],T=x[1],I=b();Object(n.useEffect)((function(){P()}),[]);var _,P=function(){var e={headers:{"access-token":I.accessToken,client:I.client,expiry:I.expiry,uid:I.uid}},t="".concat("http://206.189.91.54/api/v1","/users");fetch(t,e).then((function(e){return e.json()})).then((function(e){var t=e.data.map((function(e){return{id:e.id,uid:e.uid,email:e.email}}));m(t)}))};Object(n.useEffect)((function(){""!==N?_=setTimeout((function(){var e=o.filter((function(e){var t=new RegExp(N+"[a-zA-Z0-9]*");return e.email.match(t)}));S(e)}),500):S([])}),[N]);var L=function(){var e=Object(f.a)(h.a.mark((function e(a){var n,c,r,s,l,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("http://206.189.91.54/api/v1","/channel/add_member"),c={id:t,member_id:a},r={method:"POST",mode:"cors",headers:{"Content-Type":"application/json","access-token":I.accessToken,client:I.client,expiry:I.expiry,uid:I.uid},body:JSON.stringify(c)},e.next=5,fetch(n,r);case 5:return s=e.sent,e.next=8,s.json();case 8:l=e.sent,console.log(l),l.errors?(console.log(l.errors),i=l.errors.join(" "),T({message:i,mtype:"danger"})):T({message:"User added to channel.",mtype:"success"});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){p||T(!1)}),[p]),c.a.createElement("section",{id:"channel-chat"},c.a.createElement("div",{id:"channel-header"},c.a.createElement("div",{className:"container header"},c.a.createElement("h1",null,c.a.createElement("i",{className:"bx bx-message-square-edit"})," Add member"))),c.a.createElement("div",{id:"channel-chat-content"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"muted"},"Select a user to add to channel ",c.a.createElement("strong",null,"@",a)),c.a.createElement("div",null,w&&c.a.createElement(i,{messageType:w.mtype,message:w.message})),p&&c.a.createElement("div",{className:"user-to"},p.name," ",c.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),v(!1)}},"x")),!p&&c.a.createElement("input",{type:"text",onChange:function(e){clearTimeout(_);var t=e.target.value;j(t)},value:N,name:"channelName",className:"textbox",placeholder:"Search user...",autoComplete:"off"}),!p&&c.a.createElement("div",{className:"mt"},c.a.createElement(D,{matchedTerms:C,setUser:v})),p&&c.a.createElement("div",null,c.a.createElement("a",{href:"#",className:"btn",onClick:function(e){e.preventDefault(),console.log("ADD",p),L(p.id)}},"Confirm add")))))},U=function(e){var t=e.setPage,a=Object(n.useState)(!1),r=Object(l.a)(a,2),s=r[0],i=r[1],o=Object(n.useState)("chat"),m=Object(l.a)(o,2),u=m[0],d=m[1],h=Object(n.useState)(0),f=Object(l.a)(h,2),p=f[0],v=f[1],E=Object(n.useState)(""),g=Object(l.a)(E,2),b=g[0],j=g[1],O=Object(n.useState)([]),y=Object(l.a)(O,2),x=y[0],w=y[1],I=Object(n.useState)([]),_=Object(l.a)(I,2),D=_[0],U=_[1],A=Object(n.useState)(0),J=Object(l.a)(A,2),W=J[0],M=J[1],F=c.a.createElement(C,{setIsThreadOpen:i});"chat"===u&&(F=c.a.createElement(C,{setIsThreadOpen:i,setChatWindow:d,channelId:p,counter:W,setCounter:M,channelName:b})),"create-chat"===u&&(F=c.a.createElement(k,{chanList:x,setChanList:w})),"dm"===u&&(F=c.a.createElement(T,{channelId:p,counter:W,setCounter:M,channelName:b})),"compose-message"===u&&(F=c.a.createElement(P,{setChannelId:v,setChannelName:j,setChatWindow:d})),"add-member"===u&&(F=c.a.createElement(L,{channelId:p,channelName:b,setChatWindow:d}));var G=s&&c.a.createElement(S,{setIsThreadOpen:i});return c.a.createElement("main",null,c.a.createElement(N,{setChatWindow:d,setPage:t,chanList:x,setChanList:w,dmList:D,setdmList:U,setChannelId:v,setChannelName:j}),F,G)};a(211);var A=function(){var e=Object(n.useState)("login"),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){localStorage.getItem("user")&&r("slack")})),"login"===a?c.a.createElement(o,{setPage:r}):"signup"===a?c.a.createElement(m,{setPage:r}):"slack"===a?c.a.createElement(U,{setPage:r}):void 0},J=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,213)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(A,null)),document.getElementById("root")),J()},33:function(e,t,a){e.exports=a(212)},38:function(e,t,a){},39:function(e,t,a){}},[[33,1,2]]]);
//# sourceMappingURL=main.5fd996dc.chunk.js.map